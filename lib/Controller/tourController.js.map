{"version":3,"sources":["../../src/Controller/tourController.js"],"names":["fs","require","Tour","exports","checkBody","req","res","next","body","name","price","status","json","message","getAllTour","getTourById","console","log","params","id","createTour","data","tour","newTour","updateTour","removeTour"],"mappings":";;AAAA,IAAMA,KAAKC,QAAQ,IAAR,CAAX;AACA,IAAMC,OAAOD,QAAQ,4BAAR,CAAb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAE,QAAQC,SAAR,GAAkB,UAACC,GAAD,EAAKC,GAAL,EAASC,IAAT,EAAgB;AAC9B,MAAG,CAACF,IAAIG,IAAJ,CAASC,IAAV,IAAkB,CAACJ,IAAIG,IAAJ,CAASE,KAA/B,EAAqC;AACnC,WAAOJ,IAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,cAAO,MADmB;AAE1BE,eAAQ;AAFkB,KAArB,CAAP;AAID;AACDN;AACH,CARD;AASA;AACAJ,QAAQW,UAAR,GAAqB,UAACT,GAAD,EAAMC,GAAN,EAAc;AACjCA,MAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,YAAQ;AACR;AACA;AACA;AACA;AALmB,GAArB;AAOD,CARD;;AAUA;AACAR,QAAQY,WAAR,GAAsB,UAACV,GAAD,EAAMC,GAAN,EAAc;AAClCU,UAAQC,GAAR,CAAYZ,IAAIa,MAAhB;AACA,MAAMC,KAAKd,IAAIa,MAAJ,CAAWC,EAAX,GAAgB,CAA3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;AACA,CAXD;;AAaA;AACAhB,QAAQiB,UAAR,GAAqB,UAACf,GAAD,EAAMC,GAAN,EAAc;AACjCA,MAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACfD,YAAQ,SADO;AAEfU,UAAM;AACJC,YAAMC;AADF;AAFS,GAArB;AAMG,CAPL;AAQE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEF;AACApB,QAAQqB,UAAR,GAAqB,UAACnB,GAAD,EAAMC,GAAN,EAAc;AACjCA,MAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,YAAQ,SADW;AAEnBU,UAAM;AACJC,YAAM;AADF;AAFa,GAArB;AAMD,CAPD;;AASA;AACAnB,QAAQsB,UAAR,GAAqB,UAACpB,GAAD,EAAMC,GAAN,EAAc;;AAEjC;AACA;AACA;AACA;AACAA,MAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,YAAQ,SADW;AAEnBU,UAAM;AAFa,GAArB;AAID,CAVD","file":"tourController.js","sourcesContent":["const fs = require('fs');\r\nconst Tour = require('../../src/Models/tourModel');\r\n\r\n//ROUTE HANDLERS\r\n// exports.checkID = (req,res,next,val)=>{\r\n//     console.log(`Tour id is : ${val}`);\r\n//   if (req.params.id * 1 > tours.length) {\r\n//     return res.status(404).json({\r\n//       status: 'fail',\r\n//       message: 'Invalid ID',\r\n//     });\r\n//   }\r\n//   next();\r\n// }//checkID is invalid ---instead of using MongoDB\r\n\r\nexports.checkBody=(req,res,next)=>{\r\n    if(!req.body.name || !req.body.price){\r\n      return res.status(400).json({\r\n        status:'fail',\r\n        message:'missing name or price'\r\n      })\r\n    }\r\n    next()\r\n}\r\n//GET ALL TOUR\r\nexports.getAllTour = (req, res) => {\r\n  res.status(200).json({\r\n    status: 'success',\r\n    // results: tours.length,\r\n    // data: {\r\n    //   tours,\r\n    // },\r\n  });\r\n};\r\n\r\n//GET TOUR by Id\r\nexports.getTourById = (req, res) => {\r\n  console.log(req.params);\r\n  const id = req.params.id * 1;\r\n  // const tour = tours.find((el) => el.id === id);\r\n  // res.status(200).json({\r\n  //   status: 'success',\r\n  //   //result: tours.length,\r\n  //   data: {\r\n  //     tour,\r\n  //   },\r\n // });\r\n};\r\n\r\n//POST TOUR\r\nexports.createTour = (req, res) => {\r\n  res.status(201).json({\r\n        status: 'success',\r\n        data: {\r\n          tour: newTour,\r\n        },\r\n      });\r\n    }\r\n  //console.log(req.body);\r\n  // const newId = tours[tours.length - 1].id + 1;\r\n  // const newTour = Object.assign({ id: newId }, req.body);\r\n  // tours.push(newTour);\r\n  // fs.writeFile(\r\n  //   `${__dirname}/../dev-data/data/tours-simple.json`,\r\n  //   JSON.stringify(tours),\r\n  //   (err) => {\r\n  //     res.status(201).json({\r\n  //       status: 'success',\r\n  //       data: {\r\n  //         tour: newTour,\r\n  //       },\r\n  //     });\r\n  //   }\r\n  // );\r\n  //  res.send('Done');\r\n\r\n// PATCH / PUT TOUR\r\nexports.updateTour = (req, res) => {\r\n  res.status(200).json({\r\n    status: 'success',\r\n    data: {\r\n      tour: '<Updated tour here....!>',\r\n    },\r\n  });\r\n};\r\n\r\n//DELETE TOUR\r\nexports.removeTour = (req, res) => {\r\n  \r\n  //   res.status(200).json({\r\n  //   status: 'success',\r\n  //   data: null\r\n  //   });\r\n  res.status(204).json({\r\n    status: 'success',\r\n    data: null,\r\n  });\r\n};\r\n"]}